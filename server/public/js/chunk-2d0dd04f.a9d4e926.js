(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd04f"],{8034:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"block-card mb-4"},[i("div",{staticClass:"block-card-header"},[i("h2",{staticClass:"widget-title"},[t._v("Listing Information")]),i("div",{staticClass:"stroke-shape"})]),i("div",{staticClass:"block-card-body"},[i("form",{staticClass:"form-box row MultiFile-intercepted",on:{submit:function(e){return e.preventDefault(),t.SaveListing(e)}}},[i("v-col",{attrs:{cols:"12",md:"6",sm:"12"}},[i("v-col",{attrs:{cols:"12"}},[i("div",{staticClass:"input-box"},[i("label",{staticClass:"label-text"},[t._v("Listing Title ")]),i("v-text-field",{attrs:{solo:"",clearable:"",required:""},model:{value:t.ListingTitle,callback:function(e){t.ListingTitle=e},expression:"ListingTitle"}})],1)]),i("v-col",{attrs:{cols:"12"}},[i("div",{staticClass:"input-box"},[i("label",{staticClass:"label-text"},[t._v("Catigory ")]),i("v-combobox",{attrs:{items:t.Catigories,"item-text":"CatigoryName","item-value":"Id",solo:"","hide-no-data":"",required:""},on:{keydown:t.vCatigoryKeyDown,change:t.SelectedValueChanged},model:{value:t.SelectedCatigory,callback:function(e){t.SelectedCatigory=e},expression:"SelectedCatigory"}})],1)])],1),i("v-col",{attrs:{cols:"12",md:"6",sm:"12"}},[i("v-card",{staticClass:"mt-10"},[i("v-img",{staticClass:"grey darken-4",attrs:{src:t.imageURL,height:"150",contain:""}}),i("v-card-title",{staticClass:"title"},[i("v-file-input",{attrs:{rules:t.rules,name:t.uploadFieldName,required:"",accept:"image/png, image/jpeg, image/bmp",placeholder:"Pick an avatar"},on:{change:t.onFileChange,"click:clear":t.clearInput}})],1)],1)],1),i("v-col",{attrs:{cols:"12"}},[i("div",{staticClass:"input-box"},[i("label",{staticClass:"label-text"},[t._v("Listing Content ")]),i("v-textarea",{attrs:{solo:"",name:"input-7-4"},model:{value:t.ListingContent,callback:function(e){t.ListingContent=e},expression:"ListingContent"}})],1)]),i("div",{staticClass:"btn-box mt-4"},[i("button",{staticClass:"theme-btn gradient-btn border-0",attrs:{type:"submit"}},[t._v(" Save & Preview ")])])],1)])])},s=[],n=(i("d3b7"),i("ac1f"),i("3ca3"),i("466d"),i("ddb0"),i("2b3d"),i("7424")),l={data:function(){return{Catigories:[],SelectedCatigory:null,search:null,rules:[function(t){return!t||t.size<5e5||"Avatar size should be less than 500 KB!"}],imageURL:"",errorDialog:null,errorText:"",uploadFieldName:"file",maxSize:1024,ListingTitle:"",ListingContent:"",ImageFormData:null}},methods:{onFileChange:function(t){var e=5e5,i=e.maxSize,a=t;if(void 0!=t){var s=a.size/i/i;if(a.type.match("image.*"))if(s>1)this.errorDialog=!0,this.errorText="Your file is too big! Please select an image under 1MB";else{var n=new FormData,l=URL.createObjectURL(a);this.imageURL=l,n.append("file",a),this.ImageFormData=n}else this.errorDialog=!0,this.errorText="Please choose an image file"}},initializeCatigories:function(){var t=this;n["a"].get("/GetCompanyListings").then((function(e){e.data.Status&&(t.Catigories=e.data.Refrence)})).catch((function(t){console.log(t)}))},initializeFormData:function(){var t=this.$route.query.data;this.ListingTitle=t.ListingHeader,this.imageURL=t.ListingImage,this.ListingContent=t.ListingData,this.SelectedCatigory=1},SelectedValueChanged:function(t){void 0==t.Id&&(this.SelectedCatigory=void 0)},SaveListing:function(){var t=this;this.checkValues()?n["a"].post("/upload",this.ImageFormData).then((function(e){n["a"].post("/company/CreateNewListing",{ListingData:t.ListingContent,ListingImage:e.data.file.filename,ListingHeader:t.ListingTitle}).then((function(e){e.data.Status&&(t.ListingTitle="",t.ListingContent="",t.imageURL="",t.ImageFormData=null,t.SelectedCatigory=null,t.$toast.success(e.data.Description))})).catch((function(t){console.log(t.data)}))})).catch((function(e){t.$toast.warning(e.data.Message)})):this.$toast.warning("يرجى ملىء الحقول قبل المتابعة")},clearInput:function(){this.imageURL=""},vCatigoryKeyDown:function(t){t.preventDefault()},checkValues:function(){return!!(this.SelectedCatigory&&this.ListingTitle&&this.ListingContent&&this.ImageFormData)}},created:function(){this.initializeCatigories(),this.initializeFormData()}},o=l,r=i("2877"),c=Object(r["a"])(o,a,s,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0dd04f.a9d4e926.js.map